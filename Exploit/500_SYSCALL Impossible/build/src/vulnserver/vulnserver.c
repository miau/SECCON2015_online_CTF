#include <unistd.h>
#include <sys/resource.h>

void disable_fork()
{
    int           rslt;
    struct rlimit rlim;

    rlim.rlim_cur = rlim.rlim_max = 0;
    rslt = setrlimit(RLIMIT_NPROC, &rlim);
    if(rslt < 0){
        _exit(-1);
    }
}


char* main()
{
    int  offset = 0;
    int  rslt;
    char buf[256];

    disable_fork();
    while(offset < 512){
        rslt = read(0, &buf[offset], 512 - offset);
        if(rslt <= 0){
            break;
        }
        offset += rslt;
    }
    close(31337);
    return buf;
}
